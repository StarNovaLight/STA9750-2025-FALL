<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.22">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Starlette John">

<title>Popular Citi Bike Routes – STA 9750 Submission Material</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-fbf3368e9a39f98674df9137282eadca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-5954c0cfe2c20fa57e749fe87db8130d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.34.0/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-bootstrap5-1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
<script src="site_libs/dt-core-bootstrap5-1.13.6/js/jquery.dataTables.min.js"></script>
<script src="site_libs/dt-core-bootstrap5-1.13.6/js/dataTables.bootstrap5.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STA 9750 Submission Material</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Popular Citi Bike Routes</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Starlette John </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<style>
pre {
  color: cyan
}
</style>
<section id="most-popular-bike-routes-of-the-year" class="level1">
<h1>Most Popular Bike Routes of the Year</h1>
<section id="intro" class="level2">
<h2 class="anchored" data-anchor-id="intro">Intro</h2>
<p>In New York City there are several different ways to travel. Whether that be cars, trains, buses or even biking people. have plenty of option to choose from based on what’s the most convenient for them at that time. However, New York City a highly populated area and have one of the worst traffics in the country. This is due to the high density of the city, there is heavy traffic due to people trying to travel the same time. this where Citi Bike become more convenient for travel.Citi Bikes is a shareable bike that have many stations all around NYC in each of the five boroughs, and here riders could just use a Citi Bike from one station to the other. Some riders are members and some of them are casual. Citi Bikes help create a sense of a community recreations, more eco-friendly way to travel, and help people get more exercise in this compacted city. This interested my group since we wanted to examine the role of Citi Bikes in NYC. We became interested in looking at several factors of how infrastructure or patterns affect the Citi-Bike usage in Manhattan.</p>
<p>For my specific question I became highly interested in looking at the most popular bike routes Manhattan. We chose Manhattan as the borough to study since that’s the most heavily traffic and condensed place in New York City. We felt this was the best area to study since we could get the most accurate understanding of the Citi Bike system. I was interested in seeing the most popular bike routes and resting places in the city since I felt it would help gain a better understanding for the areas the rider’s preference to bike in. It will also allow me to understand the type of spaces and infrastructure for popular ridership.</p>
</section>
<section id="data-acquisition" class="level2">
<h2 class="anchored" data-anchor-id="data-acquisition">Data Acquisition</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Install packages </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(utils)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>get_citi_bike_data <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    fname <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"pop00"</span>, <span class="st">"citibike_manhattan_all_202410_202510.rds"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(fname)){</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Directories </span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>      raw_dir <span class="ot">&lt;-</span> <span class="st">"data/raw"</span>          <span class="co"># for zip files </span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>      out_dir <span class="ot">&lt;-</span> <span class="st">"data/processed"</span>    <span class="co"># where final RDS will be saved</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>      gis_dir <span class="ot">&lt;-</span> <span class="st">"data/gis"</span>          <span class="co"># location of borough shapefile</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">dir.create</span>(raw_dir, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">dir.create</span>(out_dir, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">dir.create</span>(gis_dir, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="do">## increase timeout + stable download </span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">options</span>(<span class="at">timeout =</span> <span class="fu">max</span>(<span class="dv">1200</span>, <span class="fu">getOption</span>(<span class="st">"timeout"</span>)))          </span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">options</span>(<span class="at">download.file.method =</span> <span class="st">"libcurl"</span>)                   </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="do">## Months + base URL</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>      months <span class="ot">&lt;-</span> <span class="fu">format</span>(</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>        <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">"2024-10-01"</span>), <span class="fu">as.Date</span>(<span class="st">"2025-10-01"</span>), <span class="at">by =</span> <span class="st">"month"</span>),</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>      <span class="st">"%Y%m"</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>      base_url <span class="ot">&lt;-</span> <span class="st">"https://s3.amazonaws.com/tripdata"</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="do">## 1) Download and prepare Manhattan GIS polygon </span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="co"># NYC DCP borough boundary URL + store path of borough </span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>      borough_url <span class="ot">&lt;-</span> <span class="st">"https://www.nyc.gov/assets/planning/download/zip/data-maps/open-data/nybb_16a.zip"</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>      borough_zip <span class="ot">&lt;-</span> <span class="fu">file.path</span>(gis_dir, <span class="st">"nyc_boroughs.zip"</span>)</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Download only if not already there</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(borough_zip)) {</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>          <span class="fu">message</span>(<span class="st">"Downloading NYC borough boundaries shapefile..."</span>)</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>          <span class="fu">download.file</span>(borough_url, borough_zip, <span class="at">mode =</span> <span class="st">"wb"</span>)</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Unzip into GIS directory</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>        <span class="fu">unzip</span>(borough_zip, <span class="at">exdir =</span> gis_dir)</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the shapefile</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>      shp_file <span class="ot">&lt;-</span> <span class="fu">list.files</span>(gis_dir, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.shp$"</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)[<span class="dv">1</span>]</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">is.na</span>(shp_file)) {</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>          <span class="fu">stop</span>(<span class="st">"No .shp file found in "</span>, gis_dir, <span class="st">" after unzip."</span>)</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the borough polygons</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>      boroughs <span class="ot">&lt;-</span> <span class="fu">st_read</span>(shp_file)</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform to standard lat/lon (WGS84, EPSG:4326)</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>      boroughs <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(boroughs, <span class="dv">4326</span>)</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract Manhattan only </span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>      name_cols <span class="ot">&lt;-</span> <span class="fu">names</span>(boroughs)</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="st">"BoroName"</span> <span class="sc">%in%</span> name_cols) {</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>        manhattan_poly <span class="ot">&lt;-</span> boroughs[boroughs<span class="sc">$</span>BoroName <span class="sc">==</span> <span class="st">"Manhattan"</span>, ]</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">"Could not find a 'boro_name' or 'BoroName' column in borough shapefile."</span>)</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">nrow</span>(manhattan_poly) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">"Manhattan polygon not found in boroughs shapefile."</span>)</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a><span class="do">## 2) Download Citi Bike data </span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>      download_zip <span class="ot">&lt;-</span> <span class="cf">function</span>(m, <span class="at">max_attempts =</span> <span class="dv">5</span>) {</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>        zip_name <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%s-citibike-tripdata.zip"</span>, m)</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>        zip_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(raw_dir, zip_name)</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>        zip_url  <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url, <span class="st">"/"</span>, zip_name)</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">file.exists</span>(zip_path)) {</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>            <span class="fu">message</span>(<span class="st">"Zip already exists: "</span>, zip_name)</span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>            <span class="fu">return</span>(zip_path)</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>          <span class="cf">for</span> (attempt <span class="cf">in</span> <span class="fu">seq_len</span>(max_attempts)) {</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>           <span class="fu">message</span>(<span class="st">"Downloading (attempt "</span>, attempt, <span class="st">"): "</span>, zip_name)</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove any partial file before retry</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> (<span class="fu">file.exists</span>(zip_path)) <span class="fu">file.remove</span>(zip_path)</span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>              ok <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>                  utils<span class="sc">::</span><span class="fu">download.file</span>(</span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>                  <span class="at">url      =</span> zip_url,</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>                  <span class="at">destfile =</span> zip_path,</span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>                  <span class="at">mode     =</span> <span class="st">"wb"</span>,</span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>                  <span class="at">quiet    =</span> <span class="cn">FALSE</span></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>                <span class="cn">TRUE</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>               }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>                <span class="fu">message</span>(<span class="st">"  Download error: "</span>, <span class="fu">conditionMessage</span>(e))</span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>                <span class="cn">FALSE</span></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>              })</span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> (ok <span class="sc">&amp;&amp;</span> <span class="fu">file.exists</span>(zip_path)) {</span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>             <span class="fu">message</span>(<span class="st">"  Download complete: "</span>, zip_name)</span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>              <span class="fu">return</span>(zip_path)</span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>          <span class="fu">Sys.sleep</span>(<span class="dv">10</span> <span class="sc">*</span> attempt)  <span class="co"># simple backoff</span></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>          <span class="fu">stop</span>(<span class="st">"Failed to download after "</span>, max_attempts, <span class="st">" attempts: "</span>, zip_url)</span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a><span class="do">## 3) Month processor with GIS-based Manhattan filter </span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>        process_month_manhattan <span class="ot">&lt;-</span> <span class="cf">function</span>(m) {</span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>        zip_name <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%s-citibike-tripdata.zip"</span>, m)</span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>        zip_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(raw_dir, zip_name)</span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Download if missing</span></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(zip_path)) {</span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>          zip_path <span class="ot">&lt;-</span> <span class="fu">download_zip</span>(m)</span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a>        <span class="fu">message</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">=== Processing month: "</span>, m, <span class="st">" ==="</span>)</span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1) Unzip to a temporary directory</span></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>        tmpdir <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="fu">tempdir</span>(), m)</span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>        <span class="fu">dir.create</span>(tmpdir, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>        <span class="fu">unzip</span>(zip_path, <span class="at">exdir =</span> tmpdir)</span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 2) List CSV files inside the unzipped folder</span></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>        csv_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(tmpdir, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.csv$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">length</span>(csv_files) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a>          <span class="fu">warning</span>(<span class="st">"No CSV files found in "</span>, zip_path)</span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a>          <span class="fu">unlink</span>(tmpdir, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>          <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a>        month_list <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">"list"</span>, <span class="fu">length</span>(csv_files))</span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 3) Process each CSV</span></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(csv_files)) {</span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a>            csv <span class="ot">&lt;-</span> csv_files[i]</span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a>            <span class="fu">message</span>(<span class="st">"  Reading: "</span>, <span class="fu">basename</span>(csv))</span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>            dt <span class="ot">&lt;-</span> <span class="fu">fread</span>(</span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>            csv,</span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a>            <span class="at">select =</span> <span class="fu">c</span>(</span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a>              <span class="st">"ride_id"</span>,</span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a>              <span class="st">"rideable_type"</span>,</span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a>              <span class="st">"started_at"</span>,</span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a>              <span class="st">"ended_at"</span>,</span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a>              <span class="st">"start_station_name"</span>,</span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a>              <span class="st">"start_station_id"</span>,</span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a>              <span class="st">"end_station_name"</span>,</span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a>              <span class="st">"end_station_id"</span>,</span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a>              <span class="st">"start_lat"</span>, <span class="st">"start_lng"</span>,</span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a>              <span class="st">"end_lat"</span>, <span class="st">"end_lng"</span>,</span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a>              <span class="st">"member_casual"</span></span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert to POSIXct</span></span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a>          dt[, started_at <span class="sc">:</span><span class="er">=</span> <span class="fu">as.POSIXct</span>(started_at, <span class="at">tz =</span> <span class="st">"America/New_York"</span>)]</span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a>          dt[, ended_at   <span class="sc">:</span><span class="er">=</span> <span class="fu">as.POSIXct</span>(ended_at,   <span class="at">tz =</span> <span class="st">"America/New_York"</span>)]</span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Date/hour format</span></span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a>          dt[, date <span class="sc">:</span><span class="er">=</span> <span class="fu">as.Date</span>(started_at)]</span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>          dt[, hour <span class="sc">:</span><span class="er">=</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(started_at, <span class="st">"%H"</span>))]</span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>    <span class="co"># GIS filter: keep only trips whose starting long. and lat. point are in Manhattan </span></span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 1) Drop rows with missing start coordinates</span></span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a>          n_before <span class="ot">&lt;-</span> <span class="fu">nrow</span>(dt)</span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a>          dt <span class="ot">&lt;-</span> dt[<span class="sc">!</span><span class="fu">is.na</span>(start_lat) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(start_lng)]</span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a>          n_after  <span class="ot">&lt;-</span> <span class="fu">nrow</span>(dt)</span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> (n_after <span class="sc">==</span> <span class="dv">0</span>L) {</span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a>            <span class="fu">message</span>(<span class="st">"    All rows in this CSV had missing start coords; skipping."</span>)</span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a>            month_list[[i]] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a>            <span class="cf">next</span></span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> (n_after <span class="sc">&lt;</span> n_before) {</span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a>            <span class="fu">message</span>(<span class="st">"    Dropped "</span>, n_before <span class="sc">-</span> n_after, <span class="st">" rows with missing start coords."</span>)</span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2) Convert start coordinates to sf points</span></span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a>          dt_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(</span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a>            dt,</span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a>            <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"start_lng"</span>, <span class="st">"start_lat"</span>),</span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a>            <span class="at">crs =</span> <span class="dv">4326</span>,</span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a>            <span class="at">remove =</span> <span class="cn">FALSE</span></span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 3) Keep only points inside Manhattan polygon</span></span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a>          inside_manhattan <span class="ot">&lt;-</span> <span class="fu">st_within</span>(dt_sf, manhattan_poly, <span class="at">sparse =</span> <span class="cn">FALSE</span>)[, <span class="dv">1</span>]</span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a>          dt_manhattan <span class="ot">&lt;-</span> dt_sf[inside_manhattan, ]</span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4) Drop geometry to go back to data.table</span></span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a>          dt_manhattan <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(<span class="fu">st_drop_geometry</span>(dt_manhattan))</span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> (<span class="fu">nrow</span>(dt_manhattan) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a>            <span class="fu">message</span>(<span class="st">"    No Manhattan-start trips in this chunk after GIS filter."</span>)</span>
<span id="cb1-217"><a href="#cb1-217" aria-hidden="true" tabindex="-1"></a>            month_list[[i]] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb1-218"><a href="#cb1-218" aria-hidden="true" tabindex="-1"></a>            <span class="cf">next</span></span>
<span id="cb1-219"><a href="#cb1-219" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb1-220"><a href="#cb1-220" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb1-221"><a href="#cb1-221" aria-hidden="true" tabindex="-1"></a>          month_list[[i]] <span class="ot">&lt;-</span> dt_manhattan</span>
<span id="cb1-222"><a href="#cb1-222" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-223"><a href="#cb1-223" aria-hidden="true" tabindex="-1"></a>          <span class="fu">rm</span>(dt, dt_sf, dt_manhattan)</span>
<span id="cb1-224"><a href="#cb1-224" aria-hidden="true" tabindex="-1"></a>          <span class="fu">gc</span>()</span>
<span id="cb1-225"><a href="#cb1-225" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb1-226"><a href="#cb1-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-227"><a href="#cb1-227" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 4) Combine all Manhattan-start trips for this month</span></span>
<span id="cb1-228"><a href="#cb1-228" aria-hidden="true" tabindex="-1"></a>          month_all <span class="ot">&lt;-</span> <span class="fu">rbindlist</span>(month_list, <span class="at">use.names =</span> <span class="cn">TRUE</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-229"><a href="#cb1-229" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-230"><a href="#cb1-230" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 5) Clean up temp files</span></span>
<span id="cb1-231"><a href="#cb1-231" aria-hidden="true" tabindex="-1"></a>          <span class="fu">unlink</span>(tmpdir, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-232"><a href="#cb1-232" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-233"><a href="#cb1-233" aria-hidden="true" tabindex="-1"></a>          month_all</span>
<span id="cb1-234"><a href="#cb1-234" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb1-235"><a href="#cb1-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-236"><a href="#cb1-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-237"><a href="#cb1-237" aria-hidden="true" tabindex="-1"></a><span class="do">## 4) Run over all months </span></span>
<span id="cb1-238"><a href="#cb1-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-239"><a href="#cb1-239" aria-hidden="true" tabindex="-1"></a>          all_months_list <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">"list"</span>, <span class="fu">length</span>(months))</span>
<span id="cb1-240"><a href="#cb1-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-241"><a href="#cb1-241" aria-hidden="true" tabindex="-1"></a>          <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(months)) {</span>
<span id="cb1-242"><a href="#cb1-242" aria-hidden="true" tabindex="-1"></a>            m <span class="ot">&lt;-</span> months[i]</span>
<span id="cb1-243"><a href="#cb1-243" aria-hidden="true" tabindex="-1"></a>            month_all <span class="ot">&lt;-</span> <span class="fu">process_month_manhattan</span>(m)</span>
<span id="cb1-244"><a href="#cb1-244" aria-hidden="true" tabindex="-1"></a>            all_months_list[[i]] <span class="ot">&lt;-</span> month_all</span>
<span id="cb1-245"><a href="#cb1-245" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rm</span>(month_all)</span>
<span id="cb1-246"><a href="#cb1-246" aria-hidden="true" tabindex="-1"></a>            <span class="fu">gc</span>()</span>
<span id="cb1-247"><a href="#cb1-247" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb1-248"><a href="#cb1-248" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb1-249"><a href="#cb1-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-250"><a href="#cb1-250" aria-hidden="true" tabindex="-1"></a>          citibike_manhattan_all <span class="ot">&lt;-</span> <span class="fu">rbindlist</span>(all_months_list, <span class="at">use.names =</span> <span class="cn">TRUE</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-251"><a href="#cb1-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-252"><a href="#cb1-252" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as RDS for later use</span></span>
<span id="cb1-253"><a href="#cb1-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-254"><a href="#cb1-254" aria-hidden="true" tabindex="-1"></a>          out_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(out_dir, <span class="st">"citibike_manhattan_all_202410_202510.rds"</span>)</span>
<span id="cb1-255"><a href="#cb1-255" aria-hidden="true" tabindex="-1"></a>          <span class="fu">saveRDS</span>(citibike_manhattan_all, out_path)</span>
<span id="cb1-256"><a href="#cb1-256" aria-hidden="true" tabindex="-1"></a>          <span class="fu">message</span>(<span class="st">"Saved full Manhattan-start dataset to: "</span>, out_path)</span>
<span id="cb1-257"><a href="#cb1-257" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-258"><a href="#cb1-258" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-259"><a href="#cb1-259" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-260"><a href="#cb1-260" aria-hidden="true" tabindex="-1"></a>citibike_manhattan_all <span class="ot">&lt;-</span><span class="fu">read_rds</span>(<span class="st">"data/processed/citibike_manhattan_all_202410_202510.rds"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>The first thing I did was to download the data. I went to the official Citi bike website where it contains all the data about the Citi Bike ridership in NYC. When looking at the files, I first learn that each month for the past year was contain in a zip file that also contains more files within to break up the data. the first major thing I had to do was figure out a way to all the data safely while not trying to have my system crash. We also had to figure out a way to only get Manhattan data, which was another issue since the Citi Bike data only contains street names. To solve this issue, we downloaded the NYC borough boundaries data, connected it to the Cit Bike dataset, to separate and obtain data for Manhattan for when it downloading giving us data ready to use. Then we safely unzip those files and save it to the folder, for when we were downloading all the zip files to only contain the city bike routes. as we downloaded the Citi Bike data from October 2024-October 2025 and created a function to bind them together so in our environment only one data frame appeared.</p>
</section>
<section id="data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="data-analysis">Data Analysis</h2>
<p>Here is where I started to do my analysis of the Citi Bike data. First, I investigated the data frame and discovered the variables I would need. Which is ride ID’s which help distinguish the number of trips being taken at these routes, this is the closest way I used for a user ID. Next, I discovered start station name and end station name which I could group together figure out the bike routes. I wanted to look at specific month more closely to see if there was certain trend that was happening. I did this by filtering out the month and the year within each of my function to help get the data for specific months. Then I used the summarize function to use sum to count the distinct ride ID’s that will indicate the different riders for each route. then I ungroup in my function then use the slice max, to give me the top ten in each of my lists. Then I used format title function to organize my column names. Then I used datable to help create a table for each of my list to create a nice table visual to make it look more professional. These were the steps going in to creating my main function for this project</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| cache: true</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>format_titles <span class="ot">&lt;-</span> <span class="cf">function</span>(df){</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(<span class="fu">colnames</span>(df), <span class="st">"_"</span>, <span class="st">" "</span>) <span class="sc">|&gt;</span> <span class="fu">str_to_title</span>()</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    df</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>}  </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>bikes_2024_10<span class="ot">&lt;-</span> citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((<span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">10</span>) <span class="sc">&amp;</span> (<span class="fu">year</span>(date)<span class="sc">==</span><span class="dv">2024</span>))<span class="sc">|&gt;</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)<span class="sc">|&gt;</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">style=</span><span class="st">'bootstrap5'</span>,<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, <span class="at">info=</span><span class="cn">FALSE</span>))</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>bikes_2024_10</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-6eaca157362f10876e83" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6eaca157362f10876e83">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","North Moore St &amp; Greenwich St","Central Park S &amp; Grand Army Plaza","Roosevelt Island Tramway","River Ter &amp; Warren St","Hudson St &amp; N Moore St","W 21 St &amp; 6 Ave","Central Park West &amp; W 72 St","Roosevelt Island Tramway"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Vesey St &amp; Church St","Central Park S &amp; Grand Army Plaza","Roosevelt Island Tramway","Vesey Pl &amp; River Terrace","North Moore St &amp; Greenwich St","9 Ave &amp; W 22 St","Central Park West &amp; W 72 St","Motorgate"],[1747,1488,1065,989,864,811,770,723,687,662]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start Station Name<\/th>\n      <th>End Station Name<\/th>\n      <th>Total Riders<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Start Station Name","targets":1},{"name":"End Station Name","targets":2},{"name":"Total Riders","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>When looking at October 2024 the first thing I noticed was that’s routes for central park appeared for times when looking at the top 10 most popular bike routes. This already indicated that central park is one of the most popular riding areas in the city.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| cache: true</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>bikes_2024_11<span class="ot">&lt;-</span>citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((<span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">11</span>) <span class="sc">&amp;</span> (<span class="fu">year</span>(date)<span class="sc">==</span><span class="dv">2024</span>))<span class="sc">|&gt;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)<span class="sc">|&gt;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">style=</span><span class="st">'bootstrap5'</span>,<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, <span class="at">info=</span><span class="cn">FALSE</span>))</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>bikes_2024_11</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-2aea39cca23f9f90cf17" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-2aea39cca23f9f90cf17">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["7 Ave &amp; Central Park South","Central Park S &amp; 6 Ave","Central Park S &amp; Grand Army Plaza","River Ter &amp; Warren St","Henry St &amp; Grand St","W 21 St &amp; 6 Ave","Norfolk St &amp; Broome St","Hudson St &amp; N Moore St","Broadway &amp; W 58 St","E 77 St &amp; 1 Ave"],["7 Ave &amp; Central Park South","Central Park S &amp; 6 Ave","Central Park S &amp; Grand Army Plaza","Vesey Pl &amp; River Terrace","Norfolk St &amp; Broome St","9 Ave &amp; W 22 St","Henry St &amp; Grand St","North Moore St &amp; Greenwich St","Broadway &amp; W 58 St","E 77 St &amp; 3 Ave"],[908,857,655,615,603,575,548,538,530,500]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start Station Name<\/th>\n      <th>End Station Name<\/th>\n      <th>Total Riders<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Start Station Name","targets":1},{"name":"End Station Name","targets":2},{"name":"Total Riders","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In November 2024 it’s discovered that total riders have obviously decreased, this could be due to the change in weather where it makes biking a little bit more inconvenient especially when its colder. While central park bike routes dominate the top 3, it shows that there are more smaller streets included in this table.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>bikes_2024_12<span class="ot">&lt;-</span>citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((<span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">12</span>) <span class="sc">&amp;</span> (<span class="fu">year</span>(date)<span class="sc">==</span><span class="dv">2024</span>))<span class="sc">|&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)<span class="sc">|&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">style=</span><span class="st">'bootstrap5'</span>,<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, <span class="at">info=</span><span class="cn">FALSE</span>))</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>bikes_2024_12</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-0a324cb288b912c6caa4" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0a324cb288b912c6caa4">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Norfolk St &amp; Broome St","Henry St &amp; Grand St","Central Park S &amp; Grand Army Plaza","W 21 St &amp; 6 Ave","E 77 St &amp; 1 Ave","E 33 St &amp; 1 Ave","Clinton St &amp; Grand St","W 42 St &amp; 8 Ave"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Henry St &amp; Grand St","Norfolk St &amp; Broome St","Central Park S &amp; Grand Army Plaza","9 Ave &amp; W 22 St","E 77 St &amp; 3 Ave","W 31 St &amp; 7 Ave","Henry St &amp; Grand St","11 Ave &amp; W 41 St"],[645,582,460,416,402,397,369,337,333,318]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start Station Name<\/th>\n      <th>End Station Name<\/th>\n      <th>Total Riders<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Start Station Name","targets":1},{"name":"End Station Name","targets":2},{"name":"Total Riders","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In December 2024 when its officially winter, ridership have taken a massive decreased, Central Park bike routes appear twice in the top 10, more smaller streets are included. This led to understanding that big open areas area is not as popular in winter months.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>bikes_2025_01<span class="ot">&lt;-</span>citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((<span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">01</span>) <span class="sc">&amp;</span> (<span class="fu">year</span>(date)<span class="sc">==</span><span class="dv">2025</span>))<span class="sc">|&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)<span class="sc">|&gt;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">style=</span><span class="st">'bootstrap5'</span>,<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, <span class="at">info=</span><span class="cn">FALSE</span>))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>bikes_2025_01</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-64b33beec9f10b7397f5" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-64b33beec9f10b7397f5">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["Norfolk St &amp; Broome St","W 21 St &amp; 6 Ave","North Moore St &amp; Greenwich St","E 77 St &amp; 1 Ave","Henry St &amp; Grand St","E 77 St &amp; 1 Ave","North Moore St &amp; Greenwich St","Henry St &amp; Grand St","E 72 St &amp; York Ave","E 48 St &amp; 5 Ave"],["Henry St &amp; Grand St","9 Ave &amp; W 22 St","Vesey St &amp; Greenwich St","E 77 St &amp; 3 Ave","Norfolk St &amp; Broome St","2 Ave &amp; E 72 St","Vesey Pl &amp; River Terrace","Grand St &amp; Samuel Dickstein Plaza","2 Ave &amp; E 72 St","W 41 St &amp; 8 Ave"],[504,438,411,401,401,373,366,358,352,347]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start Station Name<\/th>\n      <th>End Station Name<\/th>\n      <th>Total Riders<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Start Station Name","targets":1},{"name":"End Station Name","targets":2},{"name":"Total Riders","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In January 2025 Central Park doesn’t appear at all in the top 10 list. This list entirely composed of smaller streets and there aren’t any round trips as well. This seems that rider just want a fast and direct way to take this trip for convenience. This also indicates the weather becoming more colder and undesirable for Citi bike users due to another decline in total riders.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>bikes_2025_02<span class="ot">&lt;-</span>citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((<span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">02</span>) <span class="sc">&amp;</span> (<span class="fu">year</span>(date)<span class="sc">==</span><span class="dv">2025</span>))<span class="sc">|&gt;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)<span class="sc">|&gt;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">style=</span><span class="st">'bootstrap5'</span>,<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, <span class="at">info=</span><span class="cn">FALSE</span>))</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>bikes_2025_02</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-046415f62fe319b393f0" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-046415f62fe319b393f0">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["Norfolk St &amp; Broome St","Henry St &amp; Grand St","E 77 St &amp; 1 Ave","North Moore St &amp; Greenwich St","Clinton St &amp; Grand St","W 41 St &amp; 8 Ave","W 21 St &amp; 6 Ave","North Moore St &amp; Greenwich St","E 77 St &amp; 1 Ave","E 72 St &amp; York Ave"],["Henry St &amp; Grand St","Norfolk St &amp; Broome St","2 Ave &amp; E 72 St","Vesey Pl &amp; River Terrace","Henry St &amp; Grand St","E 48 St &amp; 5 Ave","9 Ave &amp; W 22 St","Vesey St &amp; Greenwich St","E 77 St &amp; 3 Ave","2 Ave &amp; E 72 St"],[455,401,373,360,344,343,332,328,324,321]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start Station Name<\/th>\n      <th>End Station Name<\/th>\n      <th>Total Riders<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Start Station Name","targets":1},{"name":"End Station Name","targets":2},{"name":"Total Riders","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In February 2025 its also shows another top 10 list where the ridership is particularly small, and that the list is entirely composed of smaller street that also doesn’t have any round trips.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>bikes_2025_03<span class="ot">&lt;-</span>citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>((<span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">03</span>) <span class="sc">&amp;</span> (<span class="fu">year</span>(date)<span class="sc">==</span><span class="dv">2025</span>))<span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)<span class="sc">|&gt;</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">style=</span><span class="st">'bootstrap5'</span>,<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, <span class="at">info=</span><span class="cn">FALSE</span>))</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>bikes_2025_03</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-37156b9b90eb134f3aeb" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-37156b9b90eb134f3aeb">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Roosevelt Island Tramway","Norfolk St &amp; Broome St","W 21 St &amp; 6 Ave","E 77 St &amp; 1 Ave","Henry St &amp; Grand St","E 77 St &amp; 1 Ave","North Moore St &amp; Greenwich St","Clinton St &amp; Grand St"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Roosevelt Island Tramway","Henry St &amp; Grand St","9 Ave &amp; W 22 St","2 Ave &amp; E 72 St","Norfolk St &amp; Broome St","E 77 St &amp; 3 Ave","Vesey St &amp; Greenwich St","Henry St &amp; Grand St"],[1068,719,600,548,499,493,477,450,419,413]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start Station Name<\/th>\n      <th>End Station Name<\/th>\n      <th>Total Riders<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Start Station Name","targets":1},{"name":"End Station Name","targets":2},{"name":"Total Riders","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In March 2025 when its officially spring, ridership increased and in fact double from the last month, when looking at the top 10. As Central Park routes appear twice, and there are more round trips this month than the previous month.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>bikes_2025_04<span class="ot">&lt;-</span>citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((<span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">04</span>) <span class="sc">&amp;</span> (<span class="fu">year</span>(date)<span class="sc">==</span><span class="dv">2025</span>))<span class="sc">|&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)<span class="sc">|&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">style=</span><span class="st">'bootstrap5'</span>,<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, <span class="at">info=</span><span class="cn">FALSE</span>))</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>bikes_2025_04</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-c590fc8a4e530444d361" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c590fc8a4e530444d361">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Roosevelt Island Tramway","Central Park S &amp; Grand Army Plaza","5 Ave &amp; E 72 St","Henry St &amp; Grand St","Norfolk St &amp; Broome St","North Moore St &amp; Greenwich St","Broadway &amp; W 58 St","E 77 St &amp; 1 Ave"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Roosevelt Island Tramway","Central Park S &amp; Grand Army Plaza","5 Ave &amp; E 72 St","Norfolk St &amp; Broome St","Henry St &amp; Grand St","Vesey St &amp; Greenwich St","Broadway &amp; W 58 St","2 Ave &amp; E 72 St"],[1561,1235,815,720,576,551,544,524,502,500]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start Station Name<\/th>\n      <th>End Station Name<\/th>\n      <th>Total Riders<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Start Station Name","targets":1},{"name":"End Station Name","targets":2},{"name":"Total Riders","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In April 2025, Central Park routes appear three times in the top 10 list, there is an increased in ridership and more round trips are being taken.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>bikes_2025_05<span class="ot">&lt;-</span>citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((<span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">05</span>) <span class="sc">&amp;</span> (<span class="fu">year</span>(date)<span class="sc">==</span><span class="dv">2025</span>))<span class="sc">|&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)<span class="sc">|&gt;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">style=</span><span class="st">'bootstrap5'</span>,<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, <span class="at">info=</span><span class="cn">FALSE</span>))</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>bikes_2025_05</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-36ddac5d4a1fd071c580" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-36ddac5d4a1fd071c580">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["7 Ave &amp; Central Park South","Central Park S &amp; 6 Ave","Roosevelt Island Tramway","Central Park S &amp; Grand Army Plaza","5 Ave &amp; E 72 St","Central Park W &amp; W 72 St","Soissons Landing","Broadway &amp; W 58 St","Central Park W &amp; W 68 St","Norfolk St &amp; Broome St"],["7 Ave &amp; Central Park South","Central Park S &amp; 6 Ave","Roosevelt Island Tramway","Central Park S &amp; Grand Army Plaza","5 Ave &amp; E 72 St","Central Park W &amp; W 72 St","Soissons Landing","Broadway &amp; W 58 St","Central Park W &amp; W 68 St","Henry St &amp; Grand St"],[1773,1494,869,805,644,599,581,573,573,562]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start Station Name<\/th>\n      <th>End Station Name<\/th>\n      <th>Total Riders<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Start Station Name","targets":1},{"name":"End Station Name","targets":2},{"name":"Total Riders","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In May 2025, there are more ridership and round trip being taken. Central Park routes appeared 5 times within the top 10, indicating nicer. Weather improve Citi bike ridership for more recreational purposes.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>bikes_2025_06<span class="ot">&lt;-</span>citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((<span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">06</span>) <span class="sc">&amp;</span> (<span class="fu">year</span>(date)<span class="sc">==</span><span class="dv">2025</span>))<span class="sc">|&gt;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)<span class="sc">|&gt;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">style=</span><span class="st">'bootstrap5'</span>,<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, <span class="at">info=</span><span class="cn">FALSE</span>))</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>bikes_2025_06</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-17822236415dfbbdfbc2" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-17822236415dfbbdfbc2">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Soissons Landing","Roosevelt Island Tramway","Central Park S &amp; Grand Army Plaza","5 Ave &amp; E 87 St","5 Ave &amp; E 72 St","Yankee Ferry Terminal","Central Park W &amp; W 68 St","Broadway &amp; W 58 St"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Soissons Landing","Roosevelt Island Tramway","Central Park S &amp; Grand Army Plaza","5 Ave &amp; E 87 St","5 Ave &amp; E 72 St","Yankee Ferry Terminal","Central Park W &amp; W 68 St","Broadway &amp; W 58 St"],[1942,1793,901,796,723,702,643,635,628,604]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start Station Name<\/th>\n      <th>End Station Name<\/th>\n      <th>Total Riders<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Start Station Name","targets":1},{"name":"End Station Name","targets":2},{"name":"Total Riders","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In June 2025, increased in ridership, Central Park routes appear four times in the list, and the top ten list consist of round trips.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>bikes_2025_07<span class="ot">&lt;-</span>citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((<span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">07</span>) <span class="sc">&amp;</span> (<span class="fu">year</span>(date)<span class="sc">==</span><span class="dv">2025</span>))<span class="sc">|&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)<span class="sc">|&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">style=</span><span class="st">'bootstrap5'</span>,<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, <span class="at">info=</span><span class="cn">FALSE</span>))</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>bikes_2025_07</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-ae339395e1c60a715c85" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ae339395e1c60a715c85">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Soissons Landing","Central Park S &amp; Grand Army Plaza","Roosevelt Island Tramway","5 Ave &amp; E 72 St","Broadway &amp; W 58 St","Central Park W &amp; W 68 St","Central Park W &amp; W 72 St","5 Ave &amp; E 87 St"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Soissons Landing","Central Park S &amp; Grand Army Plaza","Roosevelt Island Tramway","5 Ave &amp; E 72 St","Broadway &amp; W 58 St","Central Park W &amp; W 68 St","Central Park W &amp; W 72 St","5 Ave &amp; E 87 St"],[2128,2046,1216,1114,1108,970,832,737,737,715]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start Station Name<\/th>\n      <th>End Station Name<\/th>\n      <th>Total Riders<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Start Station Name","targets":1},{"name":"End Station Name","targets":2},{"name":"Total Riders","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In July 2025, Central Park routes appear 5 times in the top 10, and there is also an increased in ridership.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>bikes_2025_08<span class="ot">&lt;-</span>citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((<span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">08</span>) <span class="sc">&amp;</span> (<span class="fu">year</span>(date)<span class="sc">==</span><span class="dv">2025</span>))<span class="sc">|&gt;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)<span class="sc">|&gt;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">style=</span><span class="st">'bootstrap5'</span>,<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, <span class="at">info=</span><span class="cn">FALSE</span>))</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>bikes_2025_08</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-c8d7fd91fc8defb4ccf7" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c8d7fd91fc8defb4ccf7">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["7 Ave &amp; Central Park South","Central Park S &amp; 6 Ave","Soissons Landing","Roosevelt Island Tramway","Central Park S &amp; Grand Army Plaza","5 Ave &amp; E 72 St","Central Park W &amp; W 72 St","5 Ave &amp; E 87 St","Central Park W &amp; W 68 St","Broadway &amp; W 58 St"],["7 Ave &amp; Central Park South","Central Park S &amp; 6 Ave","Soissons Landing","Roosevelt Island Tramway","Central Park S &amp; Grand Army Plaza","5 Ave &amp; E 72 St","Central Park W &amp; W 72 St","5 Ave &amp; E 87 St","Central Park W &amp; W 68 St","Broadway &amp; W 58 St"],[2505,2302,1588,1302,1230,977,935,822,820,779]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start Station Name<\/th>\n      <th>End Station Name<\/th>\n      <th>Total Riders<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Start Station Name","targets":1},{"name":"End Station Name","targets":2},{"name":"Total Riders","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In August 2025, Central Park routes appear 5 times in the top 10, there is an increased in ridership, and the list is full of round trips taking place.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>bikes_2025_09<span class="ot">&lt;-</span>citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((<span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">09</span>) <span class="sc">&amp;</span> (<span class="fu">year</span>(date)<span class="sc">==</span><span class="dv">2025</span>))<span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)<span class="sc">|&gt;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">style=</span><span class="st">'bootstrap5'</span>,<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, <span class="at">info=</span><span class="cn">FALSE</span>))</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>bikes_2025_09</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-3194f17f3b3fb214e421" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3194f17f3b3fb214e421">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Soissons Landing","Roosevelt Island Tramway","Broadway &amp; W 58 St","West St &amp; Chambers St","Pier 40 - Hudson River Park","Central Park W &amp; W 68 St","North Moore St &amp; Greenwich St","5 Ave &amp; E 87 St"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Soissons Landing","Roosevelt Island Tramway","Broadway &amp; W 58 St","Pier 40 - Hudson River Park","West St &amp; Chambers St","Central Park W &amp; W 68 St","Vesey St &amp; Greenwich St","5 Ave &amp; E 87 St"],[2545,1167,928,915,717,708,652,651,640,637]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start Station Name<\/th>\n      <th>End Station Name<\/th>\n      <th>Total Riders<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Start Station Name","targets":1},{"name":"End Station Name","targets":2},{"name":"Total Riders","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In September 2025, where the season is shifting to fall, ridership is still high, Central Park routes appear 3 time on the list and the Pier 40 makes its debut on a top 10 list for most popular bike routes in Manhattan.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>bikes_2025_10<span class="ot">&lt;-</span>citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((<span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">10</span>) <span class="sc">&amp;</span> (<span class="fu">year</span>(date)<span class="sc">==</span><span class="dv">2025</span>))<span class="sc">|&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)<span class="sc">|&gt;</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">style=</span><span class="st">'bootstrap5'</span>,<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, <span class="at">info=</span><span class="cn">FALSE</span>))</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>bikes_2025_10</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-907cae70af9a9660119a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-907cae70af9a9660119a">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Roosevelt Island Tramway","North Moore St &amp; Greenwich St","West St &amp; Chambers St","Norfolk St &amp; Broome St","Soissons Landing","5 Ave &amp; E 72 St","Pier 40 - Hudson River Park","Central Park W &amp; W 72 St"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Roosevelt Island Tramway","Vesey St &amp; Greenwich St","Pier 40 - Hudson River Park","Henry St &amp; Grand St","Soissons Landing","5 Ave &amp; E 72 St","West St &amp; Chambers St","Central Park W &amp; W 72 St"],[1728,1424,698,695,654,621,596,586,570,560]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start Station Name<\/th>\n      <th>End Station Name<\/th>\n      <th>Total Riders<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Start Station Name","targets":1},{"name":"End Station Name","targets":2},{"name":"Total Riders","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In October 2025, Ridership is decreasing due to colder weather, Central Park appears 3 times on the top 10 list, round trips are still prevalent.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>Year_Bikes<span class="ot">&lt;-</span>citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)<span class="sc">|&gt;</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">style=</span><span class="st">'bootstrap5'</span>,<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, <span class="at">info=</span><span class="cn">FALSE</span>))</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>Year_Bikes</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-f1e676079def363cc34d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f1e676079def363cc34d">{"x":{"style":"bootstrap5","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Roosevelt Island Tramway","Central Park S &amp; Grand Army Plaza","Soissons Landing","Norfolk St &amp; Broome St","Henry St &amp; Grand St","5 Ave &amp; E 72 St","Broadway &amp; W 58 St","W 21 St &amp; 6 Ave"],["Central Park S &amp; 6 Ave","7 Ave &amp; Central Park South","Roosevelt Island Tramway","Central Park S &amp; Grand Army Plaza","Soissons Landing","Henry St &amp; Grand St","Norfolk St &amp; Broome St","5 Ave &amp; E 72 St","Broadway &amp; W 58 St","9 Ave &amp; W 22 St"],[18636,16156,8873,8170,7086,6941,6696,6409,6408,6254]],"container":"<table class=\"table table-striped table-hover row-border order-column display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start Station Name<\/th>\n      <th>End Station Name<\/th>\n      <th>Total Riders<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Start Station Name","targets":1},{"name":"End Station Name","targets":2},{"name":"Total Riders","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>Year_Bikes<span class="ot">&lt;-</span>citibike_manhattan_all<span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(start_station_name,end_station_name)<span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_riders=</span><span class="fu">sum</span>(<span class="fu">n_distinct</span>(ride_id)))<span class="sc">|&gt;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_riders,<span class="at">n=</span><span class="dv">10</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Year_Bikes, <span class="fu">aes</span>(<span class="at">x =</span>start_station_name , <span class="at">y =</span>total_riders, <span class="at">fill=</span>end_station_name)) <span class="sc">+</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">title=</span><span class="st">'Popular Bike routes'</span>,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span><span class="st">'Start Station'</span>,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span><span class="st">'Total Riders'</span>,</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill=</span> <span class="st">'End Station'</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="pop00_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Then after looking at all the monthly data, I wanted to look at the overall year just to see the consensus. As central park appears three time on the top 10 list, a lot of round trips take majority of the list. Also wanted to create a visual for the most popular bikes route from October 2024- October 2025 so I created a bar chart, using the data analyzed from my top 10 routes of the year function. I did this by using ggplot and used the start station names for my x axis, the total riders for my y axis, and used the fill for the bar to distinguish in color for the end station names. Then I labeled each axis to what they represent and create the bar chart as seen above. This shows the extreme difference between number one rank which is Central Park S &amp; 6 Ave that’s a round trip, with the rest of the list. As the difference in ridership for the overall yea is very staggering. For most routes on that list, they range around 5000-7000 ridership on the list, when compared to Central Park S &amp; 6 Ave to about 19000 ridership, which triple amount to some of the most popular bike routes. This led to have a greater understanding that Central Park is the area the majority of Citi Bikers want to go.</p>
</section>
<section id="implications" class="level2">
<h2 class="anchored" data-anchor-id="implications">Implications</h2>
<p>The implications from my result shows that, weather patterns and infrastructure do play a role when it comes to Bike routes popularity. As we seen in the winter months that there is low ridership for the Citi Bikers. This could be explained from several factors, as the weather is not suitable for biking, especially rain and snow would make it difficult to nearly impossible for some riders, they would have to choose another mode of transportation. Central Park usually gets avoid during these months is due to the amount of snow which make it possible to bike, or the ice on the ground is a safety hazard. This also explains that infrastructure does play a role, since normal street would get cleared faster than overall open spaces, due to the necessary access they provide. Also, there was little to no round trips taken during this period, due to people wanting a direct route, indicating more of a necessity than actual enjoyment for some riders. Meanwhile in spring ridership does generally improve a lot, and central parks routes become about half of the top 10 list. This could be explained improvement of weather, they still have lower ridership than the summer and fall months.This could be explained due to external factors, such as seasonal allergies being on the rise again which could make difficult for some Citi Bikers, plus more raining seasons. When looking at the summer months happen ridership increased again, and Central Park routes remain constant in the Top 10 list, this is due to biking becoming a more recreation activity during those months, since we had longer days and nice weather.Then comes the last two months of the data examine September 2025 where the number of riders reach it peaked in all the data I analyze, showing that Citi Bike a very popular during this month, and Central Park does get visited a lot of times this month, but Pier 40 also make it appearance for the time in the op 10 list, indicating riders are using Citi Bikes for more recreational reasons during this month. As we see in October 2025 where the number of riders decreased. This probably due to the change of weather,since now it was colder for bikers to use Citi Bike, which impact the ridership in some of these areas. I noticed that some bike routes become more popular on certain months, whether that convenience of infrastructure, or the type of weather the rider is experiencing. Overall, we see that while Central Park routes are consistently popular among riders, overall seasons does have an impact on total ridership.</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>This relates to the rest of my group mates specific questions and the overarching question due to several factors. We see here that infrastructure does play a role during certain months, such of which bike lanes are closed, or hardly used due to horrible weather. When you have a large open space such as Central Park maintenance could be extremely difficult especially during the winter months, which could be seen from December-February. We see lower ridership overall, and that smaller streets are becoming more popular among winter months. This could be explained that riders want to take a more direct route to their destination when the weather came become more of a hindrance. Speaking of weather, we see here that it does play an impact of the most popular bike routes, that could be noticed in the table above,that ridership to certain routes is significantly higher in the summer and parts of fall when compared to winter. Due to the changes of season does have an impact on ridership, we see how in certain month mainly January and February that ridership is extremely low. Overall while Citi Bike might be eco-friendly, it could be used for recreational purposes than a necessity, as we see here that Central Park remains of the most prominent areas for Citi Bikers.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/StarNovaLight\.github\.io\/STA9750-2025-FALL\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>